<!-- NBA Player Dashboard -->
<div id="nba-dashboard" class="nba-dashboard-container">
  <h2>NBA Player Market Volatility Dashboard</h2>
  <p class="dashboard-description">
    Analyze player attributes, market volatility, injury risk, and trade likelihood across the league.
    Use filters and charts to compare player performance and market value dynamics.
  </p>

  <!-- Dashboard Controls -->
  <div class="dashboard-controls">
    <div class="filter-group">
      <label for="team-filter">Team:</label>
      <select id="team-filter">
        <option value="all">All Teams</option>
      </select>
    </div>
    
    <div class="filter-group">
      <label for="position-filter">Position:</label>
      <select id="position-filter">
        <option value="all">All Positions</option>
        <option value="PG">Point Guard</option>
        <option value="SG">Shooting Guard</option>
        <option value="SF">Small Forward</option>
        <option value="PF">Power Forward</option>
        <option value="C">Center</option>
      </select>
    </div>

    <div class="filter-group">
      <label for="age-filter">Age Range:</label>
      <select id="age-filter">
        <option value="all">All Ages</option>
        <option value="young">Under 25</option>
        <option value="prime">25-30</option>
        <option value="veteran">Over 30</option>
      </select>
    </div>

    <div class="filter-group">
      <label for="volatility-filter">Volatility Level:</label>
      <select id="volatility-filter">
        <option value="all">All Levels</option>
        <option value="low">Low (1-3)</option>
        <option value="medium">Medium (4-6)</option>
        <option value="high">High (7-10)</option>
      </select>
    </div>

    <button id="reset-filters" class="btn btn--primary">Reset Filters</button>
  </div>

  <!-- Chart Grid -->
  <div class="chart-grid">
    <!-- Market Value vs Performance Scatter Plot -->
    <div class="chart-container">
      <h3>Market Value vs Performance</h3>
      <div id="performance-chart" class="chart"></div>
    </div>

    <!-- Volatility Score Distribution -->
    <div class="chart-container">
      <h3>Volatility Score Distribution</h3>
      <div id="volatility-chart" class="chart"></div>
    </div>

    <!-- Age vs Trade Likelihood -->
    <div class="chart-container">
      <h3>Age vs Trade Likelihood</h3>
      <div id="age-trade-chart" class="chart"></div>
    </div>

    <!-- Injury Impact Analysis -->
    <div class="chart-container">
      <h3>Injury Impact on Market Value</h3>
      <div id="injury-chart" class="chart"></div>
    </div>
  </div>

  <!-- Player Data Table -->
  <div class="table-container">
    <h3>Player Details</h3>
    <div class="table-controls">
      <label for="sort-by">Sort by:</label>
      <select id="sort-by">
        <option value="market_value_change">Market Value Change</option>
        <option value="volatility_score">Volatility Score</option>
        <option value="ppg">Points Per Game</option>
        <option value="salary">Salary</option>
        <option value="age">Age</option>
        <option value="trade_likelihood">Trade Likelihood</option>
      </select>
      
      <label for="sort-order">Order:</label>
      <select id="sort-order">
        <option value="desc">Descending</option>
        <option value="asc">Ascending</option>
      </select>
    </div>
    
    <div class="table-wrapper">
      <table id="players-table" class="players-table">
        <thead>
          <tr>
            <th>Player</th>
            <th>Team</th>
            <th>Pos</th>
            <th>Age</th>
            <th>PPG</th>
            <th>Salary</th>
            <th>Market Change</th>
            <th>Volatility</th>
            <th>Trade Risk</th>
            <th>Injury Games</th>
          </tr>
        </thead>
        <tbody id="players-table-body">
        </tbody>
      </table>
    </div>
  </div>

  <!-- Key Insights Panel -->
  <div class="insights-panel">
    <h3>Key Market Insights</h3>
    <div id="insights-content">
      <div class="insight-card">
        <h4>High Volatility Players</h4>
        <p id="high-volatility-insight">Players with volatility scores above 7</p>
      </div>
      
      <div class="insight-card">
        <h4>Rising Market Values</h4>
        <p id="rising-value-insight">Players with significant positive market change</p>
      </div>
      
      <div class="insight-card">
        <h4>Trade Watch List</h4>
        <p id="trade-watch-insight">Players with high trade likelihood</p>
      </div>
      
      <div class="insight-card">
        <h4>Injury Risk Alert</h4>
        <p id="injury-risk-insight">Players with significant injury concerns</p>
      </div>
    </div>
  </div>

  <!-- Export Options -->
  <div class="export-options">
    <button id="export-csv" class="btn btn--secondary">Export to CSV</button>
    <button id="export-json" class="btn btn--secondary">Export to JSON</button>
  </div>
</div>

<!-- Load Required Libraries -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="{{ '/assets/js/nba-data.js' | relative_url }}"></script>
<script src="{{ '/assets/js/nba-dashboard.js' | relative_url }}"></script>